#include QMK_KEYBOARD_H

// Left-hand home row mods
#define HOME_A LCTL_T(KC_A)
#define HOME_S LALT_T(KC_S)
#define HOME_D LGUI_T(KC_D)
#define HOME_F LSFT_T(KC_F)

// Right-hand home row mods
#define HOME_J RSFT_T(KC_J)
#define HOME_K RGUI_T(KC_K)
#define HOME_L LALT_T(KC_L)
#define HOME_SCLN RCTL_T(KC_SCLN)

enum layer_number {
  _QWERTY = 0,
  _SYMBOL,
  _RAISE,
};

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

/* QWERTY
 * ,-----------------------------------------------.                    ,-----------------------------------------------.
 * |       |   1   |   2   |   3   |   4   |   5   |                    |   6   |   7   |   8   |   9   |   0   |       |
 * |-------+-------+-------+-------+-------+-------|                    |-------+-------+-------+-------+-------+-------|
 * |  Tab  |   Q   |   W   |   E   |   R   |   T   |                    |   Y   |   U   |   I   |   O   |   P   |   -   |
 * |-------+-------+-------+-------+-------+-------|                    |-------+-------+-------+-------+-------+-------|
 * |  ESC  |   A   |   S   |   D   |   F   |   G   |-------.    ,-------|   H   |   J   |   K   |   L   |   ;   |   '   |
 * |-------+-------+-------+-------+-------+-------|       |    |       |-------+-------+-------+-------+-------+-------|
 * |  CAPS |   Z   |   X   |   C   |   V   |   B   |-------|    |-------|   N   |   M   |   ,   |   .   |   /   | ENTER |
 * `----------------------------------------------/       /     \       \-----------------------------------------------'
 *                     |       |       | SYMBOL| / Space /       \BackSP \  | RAISE |       |       |
 *                     |       |       |       |/       /         \       \ |       |       |       |
 *                     `-------------------------------'           '--------------------------------'
 */
 [_QWERTY] = LAYOUT(
  XXXXXXX, KC_1,    KC_2,    KC_3,    KC_4,    KC_5,                    KC_6,    KC_7,    KC_8,    KC_9,    KC_0,      XXXXXXX,
  KC_TAB,  KC_Q,    KC_W,    KC_E,    KC_R,    KC_T,                    KC_Y,    KC_U,    KC_I,    KC_O,    KC_P,      KC_MINS,
  KC_ESC,  HOME_A,  HOME_S,  HOME_D,  HOME_F,  KC_G,                    KC_H,    HOME_J,  HOME_K,  HOME_L,  HOME_SCLN, KC_QUOTE,
  CW_TOGG, KC_Z,    KC_X,    KC_C,    KC_V,    KC_B, XXXXXXX,  XXXXXXX, KC_N,    KC_M,    KC_COMM, KC_DOT,  KC_SLSH,   KC_ENTER,
                       XXXXXXX, XXXXXXX, MO(_SYMBOL), KC_SPC,  KC_BSPC, MO(_RAISE), XXXXXXX, XXXXXXX
),

/* SYMBOL
 * ,-----------------------------------------------.                    ,-----------------------------------------------.
 * |       |       |       |       |       |       |                    |       |       |       |       |       |       |
 * |-------+-------+-------+-------+-------+-------|                    |-------+-------+-------+-------+-------+-------|
 * |       |       |       |       |       |       |                    |       |       |   {   |   }   |       |       |
 * |-------+-------+-------+-------+-------+-------|                    |-------+-------+-------+-------+-------+-------|
 * |       |       |       |       |       |       |-------.    ,-------|       |       |   (   |   )   |       |       |
 * |-------+-------+-------+-------+-------+-------|       |    |       |-------+-------+-------+-------+-------+-------|
 * |       |       |       |       |       |       |-------|    |-------|       |       |   [   |   ]   |       |       |
 * `----------------------------------------------/       /     \       \-----------------------------------------------'
 *                     |       |       | SYMBOL| / Space /       \BackSP \  | RAISE |       |       |
 *                     |       |       |       |/       /         \       \ |       |       |       |
 *                     `-------------------------------'           '--------------------------------'
 */
[_SYMBOL] = LAYOUT(
  _______, _______, _______, _______, _______, _______,                   _______, _______, _______, _______, _______, _______,
  _______, _______, _______, _______, _______, _______,                   _______, _______, S(KC_LBRC), S(KC_RBRC), _______, _______,
  _______, _______, _______, _______, _______, _______,                   _______, _______, S(KC_9), S(KC_0), _______, _______,
  _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, KC_LBRC, KC_RBRC, _______, _______,
                             _______, _______, _______, _______, _______, _______, _______, _______
),

/* RAISE
 * ,-----------------------------------------------.                    ,-----------------------------------------------.
 * |       |       |       |       |       |       |                    |       |       |       |       |       |       |
 * |-------+-------+-------+-------+-------+-------|                    |-------+-------+-------+-------+-------+-------|
 * |       |       |       |       |       |       |                    |       |       |       |       |       |       |
 * |-------+-------+-------+-------+-------+-------|                    |-------+-------+-------+-------+-------+-------|
 * |       |       |       |       |       |       |-------.    ,-------|       |       |       |       |       |       |
 * |-------+-------+-------+-------+-------+-------|       |    |       |-------+-------+-------+-------+-------+-------|
 * |       |       |       |       |       |       |-------|    |-------|       |       |       |       |       |       |
 * `----------------------------------------------/       /     \       \-----------------------------------------------'
 *                     |       |       | SYMBOL| / Space /       \BackSP \  | RAISE |       |       |
 *                     |       |       |       |/       /         \       \ |       |       |       |
 *                     `-------------------------------'           '--------------------------------'
 */
[_RAISE] = LAYOUT(
  _______, _______, _______, _______, _______, _______,                   _______, _______, _______, _______, _______, _______,
  _______, _______, _______, _______, _______, _______,                   _______, _______, _______, _______, _______, _______,
  _______, _______, _______, _______, _______, _______,                   _______, _______, _______, _______, _______, _______,
  _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
                             _______, _______, _______, _______, _______, _______, _______, _______
)};

//SSD1306 OLED update loop, make sure to enable OLED_ENABLE=yes in rules.mk
#ifdef OLED_ENABLE

oled_rotation_t oled_init_user(oled_rotation_t rotation) {
  if (!is_keyboard_master())
    return OLED_ROTATION_180;  // flips the display 180 degrees if offhand
  return rotation;
}

// When you add source files to SRC in rules.mk, you can use functions.
const char *read_logo(void);

bool oled_task_user(void) {
  oled_write(read_logo(), false);
  return false;
}

#endif // OLED_ENABLE
